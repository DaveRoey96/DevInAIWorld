# Prompt Engineering 基础

> 好的 Prompt 带来好的答案。

## 核心原则

### 1. 清晰明确

**❌ 模糊**：
```
写一个排序算法
```

**✅ 清晰**：
```
用 Python 实现快速排序算法，要求：
1. 时间复杂度 O(n log n)
2. 原地排序
3. 包含测试用例
```

---

### 2. 提供上下文

**❌ 太少**：
```
优化这段代码
```

**✅ 足够**：
```
优化这段用户查询代码（Python + SQLAlchemy），这是电商场景下获取用户订单列表的接口，当前问题是查询速度慢（10万用户时超过2秒），请从索引、缓存、查询优化三个角度分析
```

---

### 3. 指定格式

```
用以下格式输出：
## 方案一
### 优点
- ...
### 缺点
- ...
### 适用场景
- ...

## 方案二
...
```

---

### 4. 分步思考

**❌ 一步到位**：
```
设计一个完整的电商系统
```

**✅ 分步**：
```
Step 1: 先设计数据库模型（用户、商品、订单）
Step 2: 再设计 API 接口
Step 3: 最后考虑高并发方案
```

---

## 常用技巧

### 1. 角色设定

```
你是一个有 10 年经验的 Java 架构师，擅长微服务设计和分布式系统。请帮我...
```

---

### 2. 示例引导

```
根据以下示例的风格，生成用户管理模块的代码：

示例：
```python
class UserService:
    def get_user(self, user_id):
        # 查询数据库，返回用户信息
        return db.query(User).filter(User.id == user_id).first()
```
```

---

### 3. 约束条件

```
写一个函数，要求：
- 输入：整数数组
- 输出：排序后的数组
- 不能用内置排序函数
- 时间复杂度 O(n log n)
- 代码要符合 PEP8 规范
```

---

### 4. 迭代优化

```
第一次：帮我写一个登录接口
（AI 生成基础版本）

第二次：加入错误处理和日志
（AI 改进）

第三次：考虑并发场景，添加锁
（AI 进一步完善）
```

---

## 编程相关 Prompt 模板

### 1. 代码生成

```
用 {语言} + {框架} 实现 {功能}：
1. {具体要求1}
2. {具体要求2}
3. {具体要求3}
包含错误处理和单元测试
```

### 2. Bug 修复

```
帮我分析这个 Bug：
错误信息：{错误信息}
相关代码：
```{语言}
{代码}
```
可能的原因是什么？如何修复？
```

### 3. 代码审查

```
审查这段 {语言} 代码：
```{语言}
{代码}
```
从以下角度分析：
1. 安全性
2. 性能
3. 可维护性
4. 潜在 bug
```

### 4. 架构

```
{咨询语言} 技术栈，{场景} 场景：
- 当前架构：{描述}
- 问题：{描述}
- 约束：{描述}
请给出架构优化建议
```

### 5. 技术学习

```
我想学习 {技术}：
- 已有基础：{基础}
- 学习目标：{目标}
- 场景：{场景}
请给我一个学习路径和资源推荐
```

---

## 常见问题

### Q: AI 生成的代码有问题怎么办？

A:
1. 指出具体问题，让 AI 修复
2. 自己理解代码逻辑
3. 本地测试验证
4. 不要完全依赖 AI

### Q: Prompt 很短但 AI 回答很长？

A:
- 明确回答长度要求
- 或者分多次提问

### Q: AI 回答不相关？

A:
1. 补充更多上下文
2. 重新组织问题
3. 指定回答范围

---

## 进阶技巧

### 1. 思维链 (Chain of Thought)

```
分步骤思考这个问题：
1. 首先分析问题
2. 然后考虑可能的方案
3. 最后给出结论
```

### 2. 自我修正

```
1. 给出初始方案
2. 让 AI 指出潜在问题
3. 根据反馈修正

或者直接让 AI：
请先给出方案，然后列出可能的问题和改进点
```

### 3. 多角度分析

```
从以下几个角度分析这个问题：
- 技术实现
- 性能
- 安全性
- 可维护性
- 成本
```

---

## 实践建议

1. **保存有效 Prompt**：建立自己的 Prompt 库
2. **持续优化**：根据效果调整
3. **形成模板**：常用场景模板化
4. **分享交流**：学习他人的最佳实践

---

*Prompt 是和 AI 沟通的语言。*
*学会它，就学会了和 AI 协作。*
